/** xj.ripple(点击波纹特效) | V0.5.0 | Apache Licence 2.0 | 2018-2022 © XJ.Chen | https://github.com/xjZone/xj.ripple/ */
!function(a,b){"function"!=typeof define||void 0===define.amd&&void 0===define.cmd?"undefined"!=typeof module&&"object"==typeof exports?module.exports=b():(a=a||self,a.xj||(a.xj={}),a.xj.ripple=b()):define(b)}(this,function(){"use strict";var a,b,c,d,e,f,g,h,k,l,m,n,o,p;return!function(){var a=window.Element.prototype;"function"!=typeof a.matches&&(a.matches=a.msMatchesSelector||a.mozMatchesSelector||a.webkitMatchesSelector||function(a){for(var b=this,c=(b.document||b.ownerDocument).querySelectorAll(a),d=0;c[d]&&c[d]!==b;)++d;return Boolean(c[d])}),"function"!=typeof a.closest&&(a.closest=function(a){for(var b=this;b&&1===b.nodeType;){if(b.matches(a))return b;b=b.parentNode}return null})}(),a="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof self?self:global,b=function(){},c="0.5.0",d="ripple",e={classTarget:document.documentElement,existClass:"xj-ripple-exist",defaultSelector:".xj-ripple, .xj-ripple-out",specialSelector:".xj-ripple-mid, .xj-ripple-out-mid",preventSelector:"img, area, input, textarea, select, audio, video, track, map"},f={debug:!1,append:!0,mouse:[0],forbid:!0,inherit:!0,nodeName:"xj-ripple",classString:"",styleObject:null,radius:"50%",opacity:"0.375",color:"currentColor",bg:"",top:"auto",left:"auto",offsetLeft:"0px",offsetTop:"0px",width:"auto",height:"auto",minWidth:"0px",minHeight:"0px",maxWidth:"none",maxHeight:"none",extraWidth:"0px",extraHeight:"0px",insertBefore:b,insertAfter:b,destroyCallback:b,transitionProperty:"transform, opacity",transitionDuration:"500ms",transitionTimingFunction:"ease-out",transitionDelay:"0ms, 125ms",insertTarget:"auto"},void 0===a.xj&&(a.xj={}),void 0===a.xj.rippleReturn&&(a.xj.rippleReturn={}),void 0!==a.xj.rippleReturn[c]?a.xj.rippleReturn[c]:(void 0===a.xj.rippleConfig&&(a.xj.rippleConfig={}),void 0===a.xj.rippleOption&&(a.xj.rippleOption={}),void 0!==a.xj.rippleConfig[c]&&Object.keys(a.xj.rippleConfig[c]).forEach(function(b){e[b]=a.xj.rippleConfig[c][b]}),void 0!==a.xj.rippleOption[c]&&Object.keys(a.xj.rippleOption[c]).forEach(function(b){f[b]=a.xj.rippleOption[c][b]}),g=a,h=g.document,h.documentElement,h.body,k=h.documentMode||/edge|firefox/i.test(navigator.userAgent),l="ontouchstart"in h,m=!1,n=function(a){return/px$/i.test(a)},o=h.createElement("xj-ripple-temporary"),o.id="xj-ripple-temporary",p=function(a,c,d,i){var j={},m=[],p=c,q="",r=c.parentElement,s=!1,t=0,u=0,v=0,w=0,x=0,y=0,z=0,A=0,B=0,C=0,D=null,E=null,F=b,G=b,H=b;if(null===p.closest("svg")){for(;null!==p;)q=p.getAttribute("xj-ripple"),""!==q&&null!==q&&void 0!==q&&m.unshift(eval("("+q+")")),p=p.hasAttribute("xj-ripple")===!1||void 0===m[0].inherit||m[0].inherit===!0?p.parentElement:null;if(null!==i&&void 0!==i&&m.push(i),m.unshift(f),m.forEach(function(a){Object.keys(a).forEach(function(b){j[b]=a[b]})}),!(a&&"mousedown"===a.type&&-1===j.mouse.indexOf(a.button)||"auto"!==j.insertTarget&&("function"==typeof j.insertTarget?c=j.insertTarget(c):0===j.insertTarget.indexOf(":parent")?c=c.parentElement.querySelector(j.insertTarget.replace(/^:parent\s*/,"")):0===j.insertTarget.indexOf(":self")?c=c.querySelector(j.insertTarget.replace(/^:self\s*/,"")):/^:(self|parent)/.test(j.insertTarget)===!1&&(c=h.querySelector(j.insertTarget)),null===c||void 0===c||c instanceof Element==!1)||c.matches(e.preventSelector)===!0||"static"===g.getComputedStyle(c).position)){if(j.forbid===!0){for(;null!==r&&s!==!0;)r.disabled===!0||r.hasAttribute("disabled")===!0||r.classList.contains("xj-ripple-disabled")===!0||"not-allowed"===g.getComputedStyle(r).cursor?s=!0:r=r.parentElement;if(s===!0)return}t=Math.ceil(c.clientWidth),u=Math.ceil(c.clientHeight),0!==t%2&&(t+=1),0!==u%2&&(u+=1),v=t/2,w=u/2,d===!1&&"auto"===j.insertTarget&&(j.append===!0?c.appendChild(o):c.insertBefore(o,c.firstChild),D=o.getBoundingClientRect(),v=(a.clientX?a.clientX:a.changedTouches[0].clientX)-D.left,w=(a.clientY?a.clientY:a.changedTouches[0].clientY)-D.top,j.debug!==!0&&c.removeChild(o)),"auto"!==j.left&&(v=n(j.left)?parseFloat(j.left):parseFloat(j.left)*t/100),"auto"!==j.top&&(w=n(j.top)?parseFloat(j.top):parseFloat(j.top)*u/100),"0px"!==j.offsetLeft&&(v+=n(j.offsetLeft)?parseFloat(j.offsetLeft):parseFloat(j.offsetLeft)*t/100),"0px"!==j.offsetTop&&(w+=n(j.offsetTop)?parseFloat(j.offsetTop):parseFloat(j.offsetTop)*u/100),x=y=2*Math.ceil(Math.sqrt(Math.max(Math.pow(v,2)+Math.pow(w,2),Math.pow(t-v,2)+Math.pow(w,2),Math.pow(t-v,2)+Math.pow(u-w,2),Math.pow(v,2)+Math.pow(u-w,2)))),"auto"!==j.width&&(x=n(j.width)?parseFloat(j.width):parseFloat(j.width)*t/100),"auto"!==j.height&&(y=n(j.height)?parseFloat(j.height):parseFloat(j.height)*u/100),"0px"!==j.extraWidth&&(x+=n(j.extraWidth)?parseFloat(j.extraWidth):parseFloat(j.extraWidth)*t/100),"0px"!==j.extraHeight&&(y+=n(j.extraHeight)?parseFloat(j.extraHeight):parseFloat(j.extraHeight)*u/100),"none"!==j.maxWidth&&(z=n(j.maxWidth)?parseFloat(j.maxWidth):parseFloat(j.maxWidth)*t/100,x>z&&(x=z)),"none"!==j.maxHeight&&(A=n(j.maxHeight)?parseFloat(j.maxHeight):parseFloat(j.maxHeight)*u/100,y>A&&(y=A)),"0px"!==j.minWidth&&(B=n(j.minWidth)?parseFloat(j.minWidth):parseFloat(j.minWidth)*t/100,B>x&&(x=B)),"0px"!==j.minHeight&&(C=n(j.minHeight)?parseFloat(j.minHeight):parseFloat(j.minHeight)*u/100,C>y&&(y=C)),E=h.createElement(j.nodeName),E.setAttribute("class","xj-ripple-element"+(j.classString?" "+j.classString:"")),null!==j.styleObject&&Object.keys(j.styleObject).forEach(function(a){E.style[a]=j.styleObject[a]}),"50%"!==j.radius&&(E.style.borderRadius=j.radius),"0.375"!==j.opacity&&(E.style.opacity=j.opacity),"currentColor"!==j.color&&(E.style.backgroundColor=j.color),""!==j.bg&&(E.style.background=j.bg),"transform, opacity"!==j.transitionProperty&&(E.style.transitionProperty=j.transitionProperty),"500ms"!==j.transitionDuration&&(E.style.transitionDuration=j.transitionDuration),"ease-out"!==j.transitionTimingFunction&&(E.style.transitionTimingFunction=j.transitionTimingFunction),"0ms, 125ms"!==j.transitionDelay&&(E.style.transitionDelay=j.transitionDelay),E.style.width=x+"px",E.style.height=y+"px",E.style.left=v-x/2+"px",E.style.top=w-y/2+"px",F=function(){k===!1&&l===!1&&(E.style.transform="scale(0)")},G=function(){k===!1&&l===!1&&(E.style.transform="scale(1)")},H=function(){null!==a&&(c.removeEventListener("mouseleave",F,!0),c.removeEventListener("mouseenter",G,!0),h.removeEventListener("mouseup",H,!0)),E.addEventListener("transitionend",function(a){"opacity"==a.propertyName&&(j.debug===!1&&c.removeChild(E),j.destroyCallback(a,E))},!0),E.style.opacity="0"},null!==a&&(c.addEventListener("mouseleave",F,!0),c.addEventListener("mouseenter",G,!0),h.addEventListener("mouseup",H,!0)),j.insertBefore(a,E),j.append===!0?c.appendChild(E):c.insertBefore(E,c.firstChild),j.insertAfter(a,E),E.clientWidth,E.style.transform="scale(1)",(null===a||"touchend"===a.type)&&H()}}},l===!0&&(h.addEventListener("touchstart",function(){m=!1},!0),h.addEventListener("touchmove",function(){m=!0},!0)),h.addEventListener(l===!0?"touchend":"mousedown",function(a){var b=null,c=void 0;(l!==!0||m!==!0)&&a.isTrusted!==!1&&1===a.target.nodeType&&((b=a.target.closest(e.specialSelector))?c=!0:(b=a.target.closest(e.defaultSelector))&&(c=!1),null!==b&&void 0!==c&&b.disabled!==!0&&b.hasAttribute("disabled")!==!0&&b.classList.contains("xj-ripple-disabled")!==!0&&"not-allowed"!==g.getComputedStyle(b).cursor&&p(a,b,c,null))},!0),null!==e.classTarget&&""!==e.existClass&&e.classTarget.classList.add(e.existClass),a.xj[d+"Return"][c]={version:c,create:function(a,b){p(null,a,!0,b)}})});
